[gd_scene load_steps=27 format=4 uid="uid://j7qvjmr5oje7"]

[ext_resource type="Script" uid="uid://pb7eqcbh2yvh" path="res://puzzle/level/level.gd" id="1_1yusr"]
[ext_resource type="Script" uid="uid://dlbyi8gfflhff" path="res://puzzle/level/components/block_provider.gd" id="2_86e1e"]
[ext_resource type="Script" uid="uid://dih2mwqkdmcfd" path="res://puzzle/level/goal_manager.gd" id="3_asouj"]
[ext_resource type="Script" uid="uid://dbo3fa8pswxeg" path="res://puzzle/ui/block/data/block_data.gd" id="3_lba1h"]
[ext_resource type="Script" uid="uid://q6bakhqg0ln6" path="res://puzzle/level/goals/destination_goal.gd" id="4_lba1h"]
[ext_resource type="Resource" uid="uid://drm2h0sdbclcy" path="res://puzzle/blocks/generic/begin.tres" id="4_ufi1f"]
[ext_resource type="Resource" uid="uid://dv3ixkouloiv6" path="res://puzzle/blocks/control flow/break.tres" id="5_sbw2j"]
[ext_resource type="TileSet" uid="uid://lo4s6najnf6a" path="res://world/tilesets/school_floor.tres" id="5_ufi1f"]
[ext_resource type="TileSet" uid="uid://e3hts0qt8gr0" path="res://puzzle/level/tilesets/school_furniture.tres" id="6_a0vli"]
[ext_resource type="Resource" uid="uid://cdcuf6t8s6ew0" path="res://puzzle/blocks/control flow/continue.tres" id="6_yds0n"]
[ext_resource type="Resource" uid="uid://bxjjm3ig67sq2" path="res://puzzle/blocks/control flow/elif.tres" id="7_dihif"]
[ext_resource type="TileSet" uid="uid://cppoyl8fkowq1" path="res://world/tilesets/school_walls.tres" id="7_uyvrt"]
[ext_resource type="PackedScene" uid="uid://cmxfefkbr2y3a" path="res://puzzle/level/objects/entities/robot/robot_character.tscn" id="8_8tqom"]
[ext_resource type="Resource" uid="uid://d2m2q1m1gwxsg" path="res://puzzle/blocks/control flow/else.tres" id="8_wl5qj"]
[ext_resource type="Resource" uid="uid://pfgckt7vvvvp" path="res://puzzle/blocks/control flow/for_int.tres" id="9_afj8x"]
[ext_resource type="Script" uid="uid://b7gqcxxy3e2bv" path="res://puzzle/level/components/resettable_comp.gd" id="9_h2m81"]
[ext_resource type="Resource" uid="uid://bcxcs62s2dpcv" path="res://puzzle/blocks/control flow/if.tres" id="10_6jcxr"]
[ext_resource type="Resource" uid="uid://cpomp6ug5x4mx" path="res://puzzle/blocks/control flow/while.tres" id="11_k0o8l"]
[ext_resource type="Resource" uid="uid://c4f1tp3s11tra" path="res://puzzle/blocks/generic/declare_var.tres" id="12_s0j6x"]
[ext_resource type="Resource" uid="uid://ip8pkjg88cjh" path="res://puzzle/blocks/generic/initialize.tres" id="13_w8pm3"]
[ext_resource type="Resource" uid="uid://bjtnr14xj3g7o" path="res://puzzle/blocks/generic/print.tres" id="14_uorc0"]
[ext_resource type="Resource" uid="uid://ih285nrl3m6r" path="res://puzzle/blocks/generic/set_var.tres" id="15_ostac"]
[ext_resource type="Resource" uid="uid://61khpoynry3m" path="res://puzzle/blocks/socket/arithmetic.tres" id="16_1yqxn"]
[ext_resource type="Resource" uid="uid://dkqtd8xcp0c2" path="res://puzzle/blocks/socket/boolean.tres" id="17_fropj"]
[ext_resource type="Resource" uid="uid://dcmh8x3cov6db" path="res://puzzle/blocks/socket/comparison.tres" id="18_3ddd3"]

[sub_resource type="CircleShape2D" id="CircleShape2D_dqsgw"]

[node name="DestinationExample" type="Node2D"]
texture_filter = 1
script = ExtResource("1_1yusr")
pan_speed = 2.0
instructions = "Get to the classroom door!

Left-click to drag-and-drop blocks.
Grab and scroll to pan and zoom.
Right-click to copy.

Grab the environment to look around."

[node name="GenericBlockProvider" type="Node" parent="."]
script = ExtResource("2_86e1e")
block_data = Array[ExtResource("3_lba1h")]([ExtResource("4_ufi1f"), ExtResource("5_sbw2j"), ExtResource("6_yds0n"), ExtResource("7_dihif"), ExtResource("8_wl5qj"), ExtResource("9_afj8x"), ExtResource("10_6jcxr"), ExtResource("11_k0o8l"), ExtResource("12_s0j6x"), ExtResource("13_w8pm3"), ExtResource("14_uorc0"), ExtResource("15_ostac"), ExtResource("16_1yqxn"), ExtResource("17_fropj"), ExtResource("18_3ddd3")])

[node name="GoalManager" type="Node" parent="."]
script = ExtResource("3_asouj")

[node name="DestinationGoal" type="Node" parent="GoalManager" node_paths=PackedStringArray("required_entity")]
script = ExtResource("4_lba1h")
required_entity = NodePath("../../Visuals/YSorted/RobotCharacter")

[node name="Camera2D" type="Camera2D" parent="."]
position = Vector2(112, 128)
zoom = Vector2(1.905, 1.905)
limit_enabled = false

[node name="Visuals" type="Node2D" parent="."]

[node name="Floor" type="TileMapLayer" parent="Visuals"]
tile_map_data = PackedByteArray("AAABAAIAAAABAAAAAAABAAMAAAABAAAAAAABAAQAAAABAAAAAAABAAUAAAAAAAAAAAABAAYAAAABAAAAAAACAAIAAAAAAAAAAAACAAMAAAABAAAAAAACAAQAAAABAAAAAAACAAUAAAABAAAAAAACAAYAAAAAAAAAAAADAAIAAAAAAAAAAAADAAMAAAABAAAAAAADAAQAAAABAAAAAAADAAUAAAABAAAAAAADAAYAAAAAAAAAAAAEAAIAAAABAAAAAAAEAAMAAAABAAAAAAAEAAQAAAABAAAAAAAEAAUAAAAAAAAAAAAEAAYAAAABAAAAAAAFAAIAAAABAAAAAAAFAAMAAAABAAAAAAAFAAQAAAABAAAAAAAFAAUAAAAAAAAAAAAFAAYAAAABAAAAAAAGAAUAAQABAAEAAAA=")
tile_set = ExtResource("5_ufi1f")

[node name="Doodads" type="TileMapLayer" parent="Visuals"]

[node name="YSorted" type="Node2D" parent="Visuals"]
y_sort_enabled = true

[node name="Furniture" type="TileMapLayer" parent="Visuals/YSorted"]
y_sort_enabled = true
tile_map_data = PackedByteArray("AAACAAMAAAAAAAAAAAACAAUAAAAAAAAAAAADAAYAAAAAAAAAAAAEAAQAAAAAAAAAAAAFAAIAAAAAAAAAAAAFAAYAAAAAAAAAAAAEAAIAAAAAAAAAAAAEAAYAAAAAAAAAAAABAAYAAAAAAAAAAAA=")
tile_set = ExtResource("6_a0vli")

[node name="Walls" type="TileMapLayer" parent="Visuals/YSorted"]
y_sort_enabled = true
tile_map_data = PackedByteArray("AAAAAAAAAQAAAAAAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAEAAAAAAAcAAQACAAAAADABAAAAAQABAAAAAAABAAEAAQABAAEAAAABAAcAAQAAAAEAAFACAAAAAQABAAAAAAACAAEAAQABAAEAAAACAAcAAQAAAAEAAFADAAAAAQABAAAAAAADAAEAAQABAAEAAAADAAcAAQAAAAEAAFAEAAAAAQABAAAAAAAEAAEAAQABAAEAAAAEAAcAAQAAAAEAAFAFAAAAAQABAAAAAAAFAAEAAQABAAEAAAAFAAcAAQAAAAEAAFAGAAAAAQAAAAAAABAGAAEAAQAAAAEAAAAGAAIAAQAAAAEAADAGAAMAAQAAAAEAADAGAAQAAQADAAAAAAAGAAUAAQADAAEAAAAGAAYAAQACAAEAAAAGAAcAAQACAAAAAFA=")
tile_set = ExtResource("7_uyvrt")

[node name="RobotCharacter" parent="Visuals/YSorted" instance=ExtResource("8_8tqom")]
position = Vector2(79.5, 79.5)

[node name="ResettableComponent" type="Node" parent="Visuals/YSorted/RobotCharacter" node_paths=PackedStringArray("base")]
script = ExtResource("9_h2m81")
base = NodePath("..")
initial_properties = Dictionary[StringName, Variant]({
&"transform": Transform2D(1, 0, 0, 1, 79.5, 79.5)
})

[node name="Destination" type="Area2D" parent="Visuals"]
position = Vector2(176, 175)
monitorable = false

[node name="CollisionShape2D" type="CollisionShape2D" parent="Visuals/Destination"]
shape = SubResource("CircleShape2D_dqsgw")

[connection signal="body_entered" from="Visuals/Destination" to="GoalManager/DestinationGoal" method="_on_entity_entered"]
[connection signal="body_exited" from="Visuals/Destination" to="GoalManager/DestinationGoal" method="_on_entity_exited"]
