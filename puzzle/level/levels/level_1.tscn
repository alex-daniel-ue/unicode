[gd_scene load_steps=27 format=4 uid="uid://j7qvjmr5oje7"]

[ext_resource type="Script" uid="uid://pb7eqcbh2yvh" path="res://puzzle/level/level.gd" id="1_nro1t"]
[ext_resource type="Script" uid="uid://dih2mwqkdmcfd" path="res://puzzle/level/goal_manager.gd" id="2_1tu8s"]
[ext_resource type="Script" uid="uid://dlbyi8gfflhff" path="res://puzzle/level/components/block_provider.gd" id="2_31an5"]
[ext_resource type="Script" uid="uid://dbo3fa8pswxeg" path="res://puzzle/ui/block/data/block_data.gd" id="3_r1u1b"]
[ext_resource type="TileSet" uid="uid://e3hts0qt8gr0" path="res://puzzle/level/tilesets/school_furniture.tres" id="4_0ttxg"]
[ext_resource type="Resource" uid="uid://dv3ixkouloiv6" path="res://puzzle/blocks/control flow/break.tres" id="4_dqsgw"]
[ext_resource type="TileSet" uid="uid://lo4s6najnf6a" path="res://world/tilesets/school_floor.tres" id="4_oat8h"]
[ext_resource type="Resource" uid="uid://cdcuf6t8s6ew0" path="res://puzzle/blocks/control flow/continue.tres" id="5_1dvc6"]
[ext_resource type="Resource" uid="uid://bxjjm3ig67sq2" path="res://puzzle/blocks/control flow/elif.tres" id="6_24qa7"]
[ext_resource type="TileSet" uid="uid://cppoyl8fkowq1" path="res://world/tilesets/school_walls.tres" id="6_oat8h"]
[ext_resource type="Resource" uid="uid://d2m2q1m1gwxsg" path="res://puzzle/blocks/control flow/else.tres" id="7_bittf"]
[ext_resource type="Resource" uid="uid://pfgckt7vvvvp" path="res://puzzle/blocks/control flow/for_int.tres" id="8_sij0o"]
[ext_resource type="Resource" uid="uid://bcxcs62s2dpcv" path="res://puzzle/blocks/control flow/if.tres" id="9_ll7cg"]
[ext_resource type="Resource" uid="uid://cpomp6ug5x4mx" path="res://puzzle/blocks/control flow/while.tres" id="10_lov5m"]
[ext_resource type="Resource" uid="uid://drm2h0sdbclcy" path="res://puzzle/blocks/generic/begin.tres" id="11_cya8a"]
[ext_resource type="Resource" uid="uid://c4f1tp3s11tra" path="res://puzzle/blocks/generic/declare_var.tres" id="12_tmnn4"]
[ext_resource type="Resource" uid="uid://ip8pkjg88cjh" path="res://puzzle/blocks/generic/initialize.tres" id="13_4vu8e"]
[ext_resource type="Resource" uid="uid://bjtnr14xj3g7o" path="res://puzzle/blocks/generic/print.tres" id="14_f7llf"]
[ext_resource type="Resource" uid="uid://ih285nrl3m6r" path="res://puzzle/blocks/generic/set_var.tres" id="15_f670w"]
[ext_resource type="Resource" uid="uid://61khpoynry3m" path="res://puzzle/blocks/socket/arithmetic.tres" id="16_un6yb"]
[ext_resource type="Resource" uid="uid://dkqtd8xcp0c2" path="res://puzzle/blocks/socket/boolean.tres" id="17_fupak"]
[ext_resource type="Resource" uid="uid://dcmh8x3cov6db" path="res://puzzle/blocks/socket/comparison.tres" id="18_6uaeg"]
[ext_resource type="Script" uid="uid://q6bakhqg0ln6" path="res://puzzle/level/goals/destination_goal.gd" id="21_dqsgw"]
[ext_resource type="PackedScene" uid="uid://cmxfefkbr2y3a" path="res://puzzle/level/objects/entities/robot/robot_character.tscn" id="24_dqsgw"]
[ext_resource type="Script" uid="uid://b7gqcxxy3e2bv" path="res://puzzle/level/components/resettable_comp.gd" id="25_dqsgw"]

[sub_resource type="CircleShape2D" id="CircleShape2D_dqsgw"]

[node name="Level1" type="Node2D"]
texture_filter = 1
script = ExtResource("1_nro1t")

[node name="GenericBlockProvider" type="Node" parent="."]
script = ExtResource("2_31an5")
block_data = Array[ExtResource("3_r1u1b")]([ExtResource("4_dqsgw"), ExtResource("5_1dvc6"), ExtResource("6_24qa7"), ExtResource("7_bittf"), ExtResource("8_sij0o"), ExtResource("9_ll7cg"), ExtResource("10_lov5m"), ExtResource("11_cya8a"), ExtResource("12_tmnn4"), ExtResource("13_4vu8e"), ExtResource("14_f7llf"), ExtResource("15_f670w"), ExtResource("16_un6yb"), ExtResource("17_fupak"), ExtResource("18_6uaeg")])

[node name="GoalManager" type="Node" parent="." node_paths=PackedStringArray("goals")]
script = ExtResource("2_1tu8s")
goals = [NodePath("DestinationGoal")]

[node name="DestinationGoal" type="Node" parent="GoalManager" node_paths=PackedStringArray("required_entity")]
script = ExtResource("21_dqsgw")
required_entity = NodePath("../../YSorted/RobotCharacter")

[node name="Camera2D" type="Camera2D" parent="."]
position = Vector2(112, 128)
zoom = Vector2(2.53, 2.53)

[node name="Floor" type="TileMapLayer" parent="."]
tile_map_data = PackedByteArray("AAABAAIAAAABAAAAAAABAAMAAAABAAAAAAABAAQAAAABAAAAAAABAAUAAAAAAAAAAAABAAYAAAABAAAAAAACAAIAAAAAAAAAAAACAAMAAAABAAAAAAACAAQAAAABAAAAAAACAAUAAAABAAAAAAACAAYAAAAAAAAAAAADAAIAAAAAAAAAAAADAAMAAAABAAAAAAADAAQAAAABAAAAAAADAAUAAAABAAAAAAADAAYAAAAAAAAAAAAEAAIAAAABAAAAAAAEAAMAAAABAAAAAAAEAAQAAAABAAAAAAAEAAUAAAAAAAAAAAAEAAYAAAABAAAAAAAFAAIAAAABAAAAAAAFAAMAAAABAAAAAAAFAAQAAAABAAAAAAAFAAUAAAAAAAAAAAAFAAYAAAABAAAAAAAGAAUAAQABAAEAAAA=")
tile_set = ExtResource("4_oat8h")

[node name="Doodads" type="TileMapLayer" parent="."]

[node name="YSorted" type="Node2D" parent="."]
y_sort_enabled = true

[node name="Furniture" type="TileMapLayer" parent="YSorted"]
y_sort_enabled = true
tile_map_data = PackedByteArray("AAACAAMAAAAAAAAAAAACAAUAAAAAAAAAAAADAAYAAAAAAAAAAAAEAAQAAAAAAAAAAAAFAAIAAAAAAAAAAAAFAAYAAAAAAAAAAAAEAAIAAAAAAAAAAAAEAAYAAAAAAAAAAAABAAYAAAAAAAAAAAA=")
tile_set = ExtResource("4_0ttxg")

[node name="Walls" type="TileMapLayer" parent="YSorted"]
y_sort_enabled = true
tile_map_data = PackedByteArray("AAAAAAAAAQAAAAAAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAEAAAAAAAcAAQACAAAAADABAAAAAQABAAAAAAABAAEAAQABAAEAAAABAAcAAQAAAAEAAFACAAAAAQABAAAAAAACAAEAAQABAAEAAAACAAcAAQAAAAEAAFADAAAAAQABAAAAAAADAAEAAQABAAEAAAADAAcAAQAAAAEAAFAEAAAAAQABAAAAAAAEAAEAAQABAAEAAAAEAAcAAQAAAAEAAFAFAAAAAQABAAAAAAAFAAEAAQABAAEAAAAFAAcAAQAAAAEAAFAGAAAAAQAAAAAAABAGAAEAAQAAAAEAAAAGAAIAAQAAAAEAADAGAAMAAQAAAAEAADAGAAQAAQADAAAAAAAGAAUAAQADAAEAAAAGAAYAAQACAAEAAAAGAAcAAQACAAAAAFA=")
tile_set = ExtResource("6_oat8h")

[node name="RobotCharacter" parent="YSorted" instance=ExtResource("24_dqsgw")]
position = Vector2(79.5, 79.5)

[node name="ResettableComponent" type="Node" parent="YSorted/RobotCharacter" node_paths=PackedStringArray("base")]
script = ExtResource("25_dqsgw")
base = NodePath("..")
initial_properties = Dictionary[StringName, Variant]({
&"transform": Transform2D(1, 0, 0, 1, 79.5, 79.5)
})

[node name="Destination" type="Area2D" parent="."]
position = Vector2(176, 175)
monitorable = false

[node name="CollisionShape2D" type="CollisionShape2D" parent="Destination"]
shape = SubResource("CircleShape2D_dqsgw")

[connection signal="body_entered" from="Destination" to="GoalManager/DestinationGoal" method="_on_entity_entered"]
[connection signal="body_exited" from="Destination" to="GoalManager/DestinationGoal" method="_on_entity_exited"]
